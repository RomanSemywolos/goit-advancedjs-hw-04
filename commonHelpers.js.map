{"version":3,"file":"commonHelpers.js","sources":["../src/js/search-api.js","../src/js/append-gallery.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport function fetchImages(query, page) {\n  return axios({\n    method: 'get',\n    url: `https://pixabay.com/api/?` + \n    `key=44704679-3d51d8c0a578dd091a2071345` +\n    `&q=${query}` +\n    `&image_type=photo` +\n    `&orientation=horizontal` +\n    `&safesearch=true` +\n    `&per_page=40` +\n    `&page=${page}`,\n    responseType: 'json',\n  });\n}","export function appendGallery(searchResult) {\n    let appendResult = '';\n    searchResult.forEach(image => {\n      appendResult += `\n        <div class=\"photo-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              ${image.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              ${image.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b>\n              ${image.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              ${image.downloads}\n            </p>\n          </div>\n        </div>\n      `;\n    });\n  \n    document.querySelector('.gallery').insertAdjacentHTML('beforeEnd', appendResult);\n  }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './search-api';\nimport { appendGallery } from './append-gallery';\n\nconst loadButton = document.querySelector('.load-more');\nconst searchForm = document.querySelector('.search-form');\n\nlet page = 1;\nlet totalPages = 0;\nlet query = '';\n\nasync function fetchData() {\n    const { data } = await fetchImages(query, page);\n    totalPages = Math.ceil(data.totalHits / 40);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'center',\n      });\n      return;\n    }\n    appendGallery(data.hits);\n\n    if (totalPages > 1) {\n      loadButton.style.display = 'block';\n      if (page === totalPages) {\n        loadButton.style.display = 'none';\n        iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'center',\n          timeout: 10000,\n        });\n      }\n    }\n}\n\nloadButton?.addEventListener('click', () => {\n    if (page < totalPages) {\n      page += 1;\n      fetchData();\n    }\n});\n\nsearchForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    document.querySelector('.gallery').innerHTML = '';\n    query = searchForm.elements.searchQuery?.value.trim();\n    page = 1;\n    loadButton.style.display = 'none';\n    if (query.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Search field is empty',\n        position: 'center',\n      });\n      return;\n    }\n    fetchData();\n});\n\n"],"names":["fetchImages","query","page","axios","appendGallery","searchResult","appendResult","image","loadButton","searchForm","totalPages","fetchData","data","iziToast","e","_a"],"mappings":"6vBAEO,SAASA,EAAYC,EAAOC,EAAM,CACvC,OAAOC,EAAM,CACX,OAAQ,MACR,IAAK,qEAECF,CAAK,6EAKFC,CAAI,GACb,aAAc,MAClB,CAAG,CACH,CCfO,SAASE,EAAcC,EAAc,CACxC,IAAIC,EAAe,GACnBD,EAAa,QAAQE,GAAS,CAC5BD,GAAgB;AAAA;AAAA,sBAEAC,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,gBAI5CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,gBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAK/B,CAAK,EAED,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaD,CAAY,CACnF,CCxBA,MAAME,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIP,EAAO,EACPQ,EAAa,EACbT,EAAQ,GAEZ,eAAeU,GAAY,CACvB,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMZ,EAAYC,EAAOC,CAAI,EAE9C,GADAQ,EAAa,KAAK,KAAKE,EAAK,UAAY,EAAE,EACtCA,EAAK,YAAc,EAAG,CACxBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,QAClB,CAAO,EACD,MACD,CACDT,EAAcQ,EAAK,IAAI,EAEnBF,EAAa,IACfF,EAAW,MAAM,QAAU,QACvBN,IAASQ,IACXF,EAAW,MAAM,QAAU,OAC3BK,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,SACV,QAAS,GACnB,CAAS,GAGT,CAEAL,GAAA,MAAAA,EAAY,iBAAiB,QAAS,IAAM,CACpCN,EAAOQ,IACTR,GAAQ,EACRS,IAEN,GAEAF,EAAW,iBAAiB,SAAWK,GAAM,OAMzC,GALAA,EAAE,eAAc,EAChB,SAAS,cAAc,UAAU,EAAE,UAAY,GAC/Cb,GAAQc,EAAAN,EAAW,SAAS,cAApB,YAAAM,EAAiC,MAAM,OAC/Cb,EAAO,EACPM,EAAW,MAAM,QAAU,OACvBP,EAAM,SAAW,EAAG,CACtBY,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,QAClB,CAAO,EACD,MACD,CACDF,GACJ,CAAC"}